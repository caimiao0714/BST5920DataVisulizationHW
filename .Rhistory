factor(Tr, levels = c("Treatment", "Control"))),
alpha = 0.3) +
geom_point() + geom_line()
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr, levels = c("Treatment", "Control")))) +
geom_point() + geom_line(alpha = 0.3)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr, levels = c("Treatment", "Control")))) +
geom_point() + geom_line()
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr)),
alpha = 0.3) +
geom_point() + geom_line()
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_point() + geom_line()
set.seed(666)
nunits = 1000
nyear = 10
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_point() + geom_line()
set.seed(666)
nunits = 200
nyear = 10
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_point() + geom_line()
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_line()
set.seed(666)
nunits = 400
nyear = 2
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_line()
set.seed(666)
nunits = 400
nyear = 2
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2018, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post  + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post)
require(tidyverse)
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_line()
Post = ifelse(Year<2008, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post  + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post)
require(tidyverse)
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.3) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.3),
alpha = 0.1) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.1)) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr)), alpha = 0.1) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.1)) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr), alpha = 0.01)) +
geom_line()
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr))) +
geom_line(alpha = 0.1)
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr))) +
geom_line(alpha = 0.3)
dat %>%
ggplot(aes(x = Post, y = Y, group = Group, color =
factor(Tr))) +
geom_line(alpha = 0.3)+
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
didfit = lm(Y ~ Tr + Post + Tr*Tr + factor(Year), data = dat)
summary(didfit)
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
didfit = lm(Y ~ Tr + Post + Tr*Tr + factor(Year), data = dat)
summary(didfit)
didfit = lm(Y ~ Tr + Post + Tr*Tr + Year, data = dat)
head(dat)
dat = data.frame(Y, Group, Tr, Post, Year)
didfit = lm(Y ~ Tr + Post + Tr*Tr + Year, data = dat)
summary(didfit)
didfit = lm(Y ~ Tr + Post + Tr*Tr + factor(Year), data = dat)
summary(didfit)
didfit = lm(Y ~ Tr + Post + Tr*Post + factor(Year), data = dat)
summary(didfit)
head(dat)
dat[1:10,]
set.seed(662)
nunits = 400
nyear = 10
b3 = 5
b1 = 3
b2 = 5
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
didfit = lm(Y ~ Tr + Post + Tr*Post + factor(Year), data = dat)
summary(didfit)
Tr*Post
set.seed(662)
nunits = 400
nyear = 10
b3 = 5
b1 = 3
b2 = 2
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 2)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 3
b2 = 2
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
didfit = lm(Y ~ Tr + Post + Tr*Post + factor(Year), data = dat)
summary(didfit)
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 2
b2 = 2
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 2
b2 = 1
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 2
b2 = 0
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 5
b1 = 2
b2 = -1
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 3
b1 = 2
b2 = 0
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 3
b1 = 2
b2 = 1
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b3 = 3
b1 = 2
b2 = 1
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% rnorm(nyear, 0, 1)
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
didfit = lm(Y ~ Tr + Post + Tr*Post + factor(Year), data = dat)
summary(didfit)
summary(didfit)$coefficients
names(summary(didfit)$coefficients)
rownames(summary(didfit)$coefficients)
summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post")]
namerow = rownames(summary(didfit)$coefficients)
summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post")]
round(summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post")], 2)
summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post")]
namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post")]
namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post")
summary(didfit)$coefficients
round(summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post"), 1], 2)
c(b0, b1, b2, b3)
set.seed(666)
nunits = 400
nyear = 10
b3 = 3
b1 = 2
b2 = 1
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
byear = rnorm(nyear, 0, 1)
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% byear
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
byear
set.seed(666)
nunits = 400
nyear = 10
b3 = 3
b1 = 2
b2 = 1
b0 = 0
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
byear = c(0, rnorm(nyear-1, 0, 1))
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% byear
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
didfit = lm(Y ~ Tr + Post + Tr*Post + factor(Year), data = dat)
summary(didfit)
namerow = rownames(summary(didfit)$coefficients)
round(summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post"), 1], 2)
c(b0, b1, b2, b3)
set.seed(666)
nunits = 400
nyear = 10
b0 = 0
b1 = 1
b2 = 2
b3 = 3
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
byear = c(0, rnorm(nyear-1, 0, 1))
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% byear
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
set.seed(666)
nunits = 400
nyear = 10
b0 = 1
b1 = 2
b2 = 3
b3 = 4
Group = rep(1:nunits, each = nyear)
Year = rep(2007:(2007+nyear-1), times = nunits)
Tr = rep(sample(0:1, nunits, replace = TRUE), each = nyear)
Post = ifelse(Year<2013, 0, 1)
byear = c(0, rnorm(nyear-1, 0, 1))
yyear = model.matrix( ~ YEAR-1, data=data.frame(YEAR = factor(Year))) %*% byear
Y = b0 + b1*Tr + b2*Post + b3*Tr*Post + yyear + rnorm(nunits*nyear, 0, 1)
dat = data.frame(Y, Group, Tr, Post, Year)
require(tidyverse)
dat %>%
ggplot(aes(x = Year, y = Y, group = Group, color = factor(Tr))) +
geom_line(alpha = 0.3) +
guides(colour = guide_legend(override.aes = list(alpha = 1))) +
theme_bw()
didfit = lm(Y ~ Tr + Post + Tr*Post + factor(Year), data = dat)
summary(didfit)
namerow = rownames(summary(didfit)$coefficients)
round(summary(didfit)$coefficients[namerow %in% c("(Intercept)", "Tr", "Post", "Tr:Post"), 1], 2)
c(b0, b1, b2, b3)
